# a100.ipynb 코드 리뷰

## 요약
- 밝기 증강과 다중 밝기 앙상블을 통해 A100 환경에서 0.94 수준에 머물던 정확도를 높이려는 구조로 개편됨 (`day_03/어댑터로 돌리기/a100.ipynb:22`, `day_03/어댑터로 돌리기/a100.ipynb:26`).
- 학습 루프는 FAST 모드를 유지하면서도 에폭 종료 평가를 끈 상태로 주요 하이퍼파라미터를 환경변수로 조정할 수 있게 했음 (`day_03/어댑터로 돌리기/a100.ipynb:24`).
- 검증 및 추론 셀이 동일한 앙상블 로직을 사용해 검증/제출 간 행동이 일관적임 (`day_03/어댑터로 돌리기/a100.ipynb:28`).

## 주요 발견사항
- `HF_TOKEN`이 노트북 코드에 평문으로 하드코딩돼 있어 공유 시 곧바로 노출된다 (`day_03/어댑터로 돌리기/a100.ipynb:6`). 반드시 삭제하거나 비밀 변수로 옮겨야 한다.
- `run_inference`에서 밝기 레벨별로 이미지를 반복 인코딩하면서 배치 크기가 레벨 수만큼 곱해진다 (`day_03/어댑터로 돌리기/a100.ipynb:26`). 밝기 조합이 많을수록 VRAM 사용량과 지연이 급격히 증가한다.
- 매번 원본 이미지를 디스크에서 다시 열어 밝기 변환을 적용하므로 저장소가 느리면 I/O 병목이 발생할 수 있다.
- FAST 모드 활성화 시 검증 데이터가 10개 수준으로 제한되는데, 학습 셀 로그에는 “에폭 평가 비활성화” 메시지만 표시돼 별도 검증 셀 실행이 필요한 점이 명확히 안내되지 않는다 (`day_03/어댑터로 돌리기/a100.ipynb:24`).

## 제안
1. `HF_TOKEN`을 즉시 외부 비밀 저장소(Kaggle Secrets 등)로 이동시키고 노트북에는 로딩 코드만 남겨라.
2. 앙상블 밝기 레벨을 VRAM 모니터링 결과에 맞춰 자동으로 줄이거나 `PRED_BATCH_SIZE`를 밝기 레벨 수에 따라 동적으로 낮춰라.
3. 추론 시 한 번 로드한 이미지를 메모리에 캐싱하고 밝기 변환을 적용하도록 헬퍼를 추가하면 불필요한 파일 읽기를 줄일 수 있다.
4. FAST 모드와 전체 학습 플로우 차이를 노트북 마크다운에 명확히 설명해 팀원이 검증 셀 실행을 빼먹지 않도록 해라.
